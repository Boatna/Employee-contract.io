<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á PDF</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    @font-face {
  font-family: 'THSarabun';
  src: url('fonts/THSarabun.woff2') format('woff2'),
       url('fonts/THSarabun.woff') format('woff');
  font-weight: 400;
  font-style: normal;
}
body {
  font-family: 'Sarabun', 'THSarabun', sans-serif !important;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
    .a4 {
    width: 210mm;
    min-height: 297mm;
    padding: 16mm;
    background: #fff;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
    margin: 0 auto;
    box-sizing: border-box;
    font-family: 'Sarabun', sans-serif !important;
  }
    .form-group { margin-bottom: 1rem; }
    .label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 0.5rem; }
    .input {
      width: 100%;
      border: 1px solid #d1d5db;
      border-radius: 1rem;
      padding: 0.75rem 1rem;
      font-size: 14px;
    }
    .input:focus {
      outline: none;
      border-color: #000000;
      box-shadow: 0 0 0 3px rgba(59,130,246,0.1);
    }
    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 1.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
    }
    .btn-primary {
      background: linear-gradient(to right, #2563eb, #4f46e5);
      color: white;
    }
    .btn-secondary {
      background: linear-gradient(to right, #475569, #1e293b);
      color: white;
    }
    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #000000;
      margin-bottom: 1rem;
      border-bottom: 2px solid #dbeafe;
      padding-bottom: 0.5rem;
    }
    .contract-preview {
      background: white;
      border-radius: 0.5rem;
      border: 1px solid #e2e8f0;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .clause {
      margin-top: 0.5rem;
      text-align: justify;
      text-indent: 2em;
      line-height: 1.8;
    }
    .clause-number {
      font-weight: 600;
      color: #000000;
    }
    .signature-box {
    height: 4rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
  }
    .signature-box img {
    max-height: 60px;
    max-width: 150px;
    object-fit: contain;
}
    .contract-content {
  font-size: 14px;
  line-height: 1.6;
  color: #000;
  font-family: 'Sarabun', 'THSarabun', sans-serif !important;
}

.contract-content p {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  text-align: justify;
  text-indent: 2em;
}
.contract-content .font-bold {
  font-weight: 600;
}
    @media print {
  @page {
    size: A4;
    margin: 0;
  }
  body, .a4 {
    width: 210mm;
    height: 297mm;
    margin: 0 !important;
    box-shadow: none;
    font-family: 'Sarabun', sans-serif !important;
  }
}
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">

  <div class="max-w-7xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">üìÑ ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h1>
      <p class="text-lg text-gray-600">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô PDF ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
      <div class="mt-4 h-1 w-32 bg-gradient-to-r from-blue-500 to-indigo-600 mx-auto rounded-full"></div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° -->
      <div class="card no-print">
        <form id="contractForm" class="space-y-6">
          <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
          <div class="border-b border-gray-200 pb-4">
            <h2 class="section-title">üë• ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á/‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-group">
                <label class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á</label>
                <input id="employer_name" class="input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á" />
              </div>
              <div class="form-group">
                <label class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á</label>
                <input id="employee_name" class="input" placeholder="‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ" required />
              </div>

              <div class="form-group md:col-span-2">
                <label class="label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á</label>
                <input id="employee_addr" class="input" placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ‡∏´‡∏°‡∏π‡πà ‡∏ã‡∏≠‡∏¢ ‡∏ñ‡∏ô‡∏ô ‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏• ‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î" required />
              </div>

              <div class="form-group md:col-span-2">
                <label class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</label>
                <select id="contract_place" class="input" required>
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</option>
                <option value="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ö‡∏¥‡∏ó‡πÑ‡∏ß‡πâ‡∏™‡πå (‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢) ‡∏à‡∏≥‡∏Å‡∏±‡∏î">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ö‡∏¥‡∏ó‡πÑ‡∏ß‡πâ‡∏™‡πå (‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢) ‡∏à‡∏≥‡∏Å‡∏±‡∏î</option>
                <option value="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ö‡∏¥‡∏ó‡πÑ‡∏ß‡πâ‡∏™‡πå ‡∏Æ‡∏µ‡∏ó‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡πÄ‡∏ä‡∏ô‡πÄ‡∏à‡∏≠‡∏£‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ö‡∏¥‡∏ó‡πÑ‡∏ß‡πâ‡∏™‡πå ‡∏Æ‡∏µ‡∏ó‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡πÄ‡∏ä‡∏ô‡πÄ‡∏à‡∏≠‡∏£‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î</option>
                <option value="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÑ‡∏ó‡∏¢ ‡∏ó‡∏≤‡∏ã‡∏≤‡∏Å‡∏¥ ‡πÄ‡∏≠‡πá‡∏ô‡∏à‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡∏¥‡πà‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÑ‡∏ó‡∏¢ ‡∏ó‡∏≤‡∏ã‡∏≤‡∏Å‡∏¥ ‡πÄ‡∏≠‡πá‡∏ô‡∏à‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡∏¥‡πà‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î</option>
             </select>
             </div>
             <div class="form-group md:col-span-2">
                <label class="label">‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</label>
                <input id="company_addr" class="input bg-gray-100" readonly />
              </div>
            </div>
          </div>

          <!-- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
          <div class="border-b border-gray-200 pb-4">
            <h2 class="section-title">üìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡πâ‡∏≤‡∏á</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-group">
                <label class="label">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</label>
                <input id="position" class="input" placeholder="‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢" required />
              </div>
              <div class="form-group">
                <label class="label">‡πÅ‡∏ú‡∏ô‡∏Å</label>
                <input id="department" class="input" placeholder="‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢" />
              </div>
              <div class="form-group">
                <label class="label">‡∏ù‡πà‡∏≤‡∏¢</label>
                <input id="division" class="input" placeholder="‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î" />
              </div>
              <div class="form-group">
                <label class="label">‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                <input id="education" class="input" placeholder="‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" />
              </div>
              <div class="form-group">
                <label class="label">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</label>
                <input id="start_date" type="date" class="input" required />
              </div>
              <div class="form-group">
                <label class="label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏à‡πâ‡∏≤‡∏á</label>
                <select id="employment_type" class="input">
                  <option value="‡∏ß‡∏±‡∏ô">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
                  <option value="‡πÄ‡∏î‡∏∑‡∏≠‡∏ô" selected>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                </select>
              </div>
              <div class="form-group">
                <label class="label">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á</label>
                <input id="wage_amount" type="number" class="input" placeholder="35000" required />
              </div>
              <div class="form-group">
                <label class="label">‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏á‡∏≤‡∏ô (‡∏ß‡∏±‡∏ô)</label>
                <input id="probation" type="number" class="input" placeholder="90" />
              </div>
              <div class="form-group">
                <label class="label">‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</label>
                <input id="deposit_amount" type="number" class="input" placeholder="5000" />
              </div>
              <div class="form-group">
                <label class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏¢‡∏≤‡∏ô 1</label>
                <input id="witness1_name" class="input" placeholder="‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á" />
              </div>
              <div class="form-group">
                <label class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏¢‡∏≤‡∏ô 2</label>
                <input id="witness2_name" class="input" placeholder="‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥ ‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà" />
              </div>
            </div>
          </div>

          <!-- ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô -->
          <div class="border-b border-gray-200 pb-4">
            <h2 class="section-title">‚úçÔ∏è ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-group">
                <label class="label">‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á</label>
                <input type="file" id="employer_signature" accept="image/*" class="input" />
              </div>
              <div class="form-group">
                <label class="label">‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á</label>
                <input type="file" id="employee_signature" accept="image/*" class="input" />
              </div>
              <div class="form-group">
                <label class="label">‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏û‡∏¢‡∏≤‡∏ô 1</label>
                <input type="file" id="witness1_signature" accept="image/*" class="input" />
              </div>
              <div class="form-group">
                <label class="label">‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏û‡∏¢‡∏≤‡∏ô 2</label>
                <input type="file" id="witness2_signature" accept="image/*" class="input" />
              </div>
            </div>
          </div>

          <div class="pt-4 flex flex-col sm:flex-row gap-3 justify-end">
            <button type="button" id="btnPreview" class="btn btn-secondary">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
            <button type="button" id="btnPDF" class="btn btn-primary">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF</button>
            <button type="button" id="btnShare" class="btn btn-secondary">üåê ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ä‡∏£‡πå</button>
            <button type="button" id="btnReset" class="btn btn-secondary">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
          </div>
        </form>
      </div>

      <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤ -->
      <div class="contract-container no-print">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤</h2>
        <div class="preview-container">
          <div id="contractPreview" class="a4 contract-content">
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
const $ = id => document.getElementById(id);

// ‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
let signatures = {
  employer: null,
  employee: null,
  witness1: null,
  witness2: null
};

// ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
const companyAddresses = {
  "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ö‡∏¥‡∏ó‡πÑ‡∏ß‡πâ‡∏™‡πå (‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢) ‡∏à‡∏≥‡∏Å‡∏±‡∏î": "25/12 ‡∏´‡∏°‡∏π‡πà 20 ‡∏ã‡∏≠‡∏¢‡∏®‡∏£‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡∏∏‡∏Ç ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏ó‡∏û‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏ï‡∏≥‡∏ö‡∏•‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ‡πÉ‡∏´‡∏ç‡πà ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£",
  "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ö‡∏¥‡∏ó‡πÑ‡∏ß‡πâ‡∏™‡πå ‡∏Æ‡∏µ‡∏ó‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡πÄ‡∏ä‡∏ô‡πÄ‡∏à‡∏≠‡∏£‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î": "99 ‡∏´‡∏°‡∏π‡πà 20 ‡∏ã‡∏≠‡∏¢‡∏®‡∏£‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡∏∏‡∏Ç ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏ó‡∏û‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏ï‡∏≥‡∏ö‡∏•‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£",
  "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÑ‡∏ó‡∏¢ ‡∏ó‡∏≤‡∏ã‡∏≤‡∏Å‡∏¥ ‡πÄ‡∏≠‡πá‡∏ô‡∏à‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡∏¥‡πà‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î": "89/55 ‡∏´‡∏°‡∏π‡πà20 ‡∏ã‡∏≠‡∏¢‡∏®‡∏£‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡∏∏‡∏Ç ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏ó‡∏û‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏ï‡∏≥‡∏ö‡∏•‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ‡πÉ‡∏´‡∏ç‡πà ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£"
};

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
$("contract_place").addEventListener("change", () => {
  const selected = $("contract_place").value;
  $("company_addr").value = companyAddresses[selected] || "";
  renderContract();
});

// ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô
function readSig(input, key) {
  const f = input.files?.[0];
  if (!f) return;
  const r = new FileReader();
  r.onload = e => {
    signatures[key] = e.target.result;
    renderContract();
  };
  r.readAsDataURL(f);
}

["employer", "employee", "witness1", "witness2"].forEach(k => {
  $(`${k}_signature`).addEventListener("change", e => readSig(e.target, k));
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢
function fmt(n) { return n ? Number(n).toLocaleString('th-TH') : ""; }
function dateTH(d) { return d ? new Date(d).toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }) : "........"; }
function todayTH() { return new Date().toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }); }

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
function getFormData() {
  return {
    employer_name: $("employer_name").value,
    employee_name: $("employee_name").value,
    employee_addr: $("employee_addr").value,
    contract_place: $("contract_place").value,
    company_addr: $("company_addr").value,
    position: $("position").value,
    department: $("department").value,
    division: $("division").value,
    education: $("education").value,
    start_date: $("start_date").value,
    employment_type: $("employment_type").value,
    wage_amount: $("wage_amount").value,
    probation: $("probation").value,
    deposit_amount: $("deposit_amount").value,
    witness1_name: $("witness1_name").value,
    witness2_name: $("witness2_name").value,
    signatures: signatures
  };
}

// ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏•‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
function fillFormData(data) {
  for (let key in data) {
    if (key === "signatures") {
      Object.assign(signatures, data[key]);
    } else if ($(`${key}`)) {
      $(`${key}`).value = data[key];
    }
  }
  $("company_addr").value = companyAddresses[$("contract_place").value] || "";
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ä‡∏£‡πå
function generateShareLink() {
  const data = getFormData();
  const jsonString = JSON.stringify(data);
  const base64 = btoa(unescape(encodeURIComponent(jsonString)));
  const link = `${window.location.origin}${window.location.pathname}#data=${base64}`;

  navigator.clipboard.writeText(link).then(() => {
    alert("‚úÖ ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ä‡∏£‡πå‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!\n\n‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°");
  }).catch(() => {
    prompt("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á:", link);
  });
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å URL
function loadFromUrl() {
  const hash = window.location.hash;
  if (hash.startsWith("#data=")) {
    const base64 = hash.slice(6);
    try {
      const json = decodeURIComponent(escape(atob(base64)));
      const data = JSON.parse(json);
      fillFormData(data);
      renderContract();
      alert("‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
    } catch (e) {
      console.error("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏î‡πâ", e);
    }
  }
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤
function renderContract() {
  const d = getFormData();

const contractHTML = `
    <div class="text-center font-bold mb-4">${d.contract_place}<br>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div>
    <div class="flex justify-between mb-4">
      <div>‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà ${d.contract_place || "...................................."}</div>
      <div>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${todayTH()}</div>
    </div>
    <p class="clause">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ ‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á ${d.contract_place} ‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ${companyAddresses[d.contract_place] || "...................................."} ‡∏ã‡∏∂‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ "‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á" ‡∏ù‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏Å‡∏±‡∏ö <strong>${d.employee_name}</strong> ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà <strong>${d.employee_addr}</strong> ‡∏ã‡∏∂‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ "‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á" ‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á ‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡∏Å‡∏•‡∏á‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Å‡∏±‡∏ô‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ</p>

    <div class="clause"><span class="clause-number">1.</span> ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏ï‡∏Å‡∏•‡∏á‡∏à‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏ï‡∏Å‡∏•‡∏á‡∏£‡∏±‡∏ö‡∏à‡πâ‡∏≤‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á <strong>${d.position}</strong> ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡πÅ‡∏ú‡∏ô‡∏Å <strong>${d.department}</strong> ‡∏ù‡πà‡∏≤‡∏¢ <strong>${d.division}</strong> ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <strong>${dateTH(d.start_date)}</strong> ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏õ</div>

    <div class="clause"><span class="clause-number">2.</span> ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠ 1 ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö <strong>${d.education}</strong> ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ ‡∏´‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏≤‡∏Å‡∏é‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á ‡πÑ‡∏î‡πâ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏≠‡∏≤‡∏à‡∏ô‡∏≥‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ ‡πÇ‡∏î‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏£‡∏ì‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø</div>

    <div class="clause"><span class="clause-number">3.</span> ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏ï‡∏Å‡∏•‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏ï‡∏Å‡∏•‡∏á‡∏£‡∏±‡∏ö ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ</div>
    <div class="clause"><span class="clause-number">3.1</span> ‡∏ï‡∏Å‡∏•‡∏á‡∏à‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢ <strong>${d.employment_type}</strong></div>
    <div class="clause"><span class="clause-number">3.2</span> ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á <strong>${fmt(d.wage_amount)}</strong> ‡∏ö‡∏≤‡∏ó / ‡∏ß‡∏±‡∏ô / ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
    <div class="clause"><span class="clause-number">3.3</span> ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø</div>

    <div class="clause"><span class="clause-number">4.</span> ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏´‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏≠‡∏±‡∏ô‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ ‡∏ì ‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢</div>
    <div class="clause"><span class="clause-number">5.</span> ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏≠‡∏±‡∏ô‡∏û‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÇ‡∏î‡∏¢‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏Å‡∏≥‡∏´‡∏ô‡∏î</div>
    <div class="clause"><span class="clause-number">6.</span> ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏á‡∏≤‡∏ô <strong>${d.probation}</strong> ‡∏ß‡∏±‡∏ô ‡∏ô‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô ‡∏´‡∏≤‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏ô‡∏µ‡πâ ‡∏ñ‡πâ‡∏≤‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏û‡∏≠‡πÉ‡∏à ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πÄ‡∏•‡∏¥‡∏Å‡∏à‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¥‡∏Å‡∏à‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏¥‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á <strong>${d.probation}</strong> ‡∏ß‡∏±‡∏ô ‡∏ô‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡πâ‡∏≤‡∏á</div>
    <div class="clause"><span class="clause-number">7.</span> ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏à‡πâ‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡πÇ‡∏¢‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÇ‡∏ï‡πâ‡πÅ‡∏¢‡πâ‡∏á‡πÉ‡∏î‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</div>
    <div class="clause"><span class="clause-number">8.</span> ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏•‡∏á‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏µ‡πâ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏ß‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á) ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏û‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô <strong>${fmt(d.deposit_amount)}</strong> ‡∏ö‡∏≤‡∏ó</div>
    <div class="clause"><span class="clause-number">9.</span> ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡πÜ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡∏ï‡∏ô‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ó‡∏Å‡πá‡∏ï‡∏≤‡∏° ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏û‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø</div>
    <div class="clause"><span class="clause-number">10.</span> ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πà‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏ó‡∏£‡∏≤‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏Ç‡∏≤‡∏î ‡∏ó‡∏±‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏≤‡∏à‡∏≤‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡∏´‡∏≤‡∏Å‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏•‡∏á‡πÇ‡∏ó‡∏©‡∏ó‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø</div>
    <div class="clause"><span class="clause-number">11.</span> ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÇ‡∏î‡∏¢‡πÄ‡∏Ñ‡∏£‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏î‡∏ï‡∏•‡∏≠‡∏î‡∏à‡∏ô‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÉ‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£</div>

    <div class="mt-10 grid grid-cols-2 gap-8 text-center">
  <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 1: ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á ‡πÅ‡∏•‡∏∞ ‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á -->
  <div>
    <div class="signature-box">${signatures.employee ? `<img src="${signatures.employee}" />` : ""}</div>
    <div>‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ .................................... ‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á</div>
    <div>(${d.employee_name})</div>
  </div>
  <div>
    <div class="signature-box">${signatures.employer ? `<img src="${signatures.employer}" />` : ""}</div>
    <div>‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ .................................... ‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á/‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏≠‡∏≥‡∏ô‡∏≤‡∏à</div>
    <div>(${d.employer_name})</div>
  </div>

  <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 2: ‡∏û‡∏¢‡∏≤‡∏ô 2 ‡∏Ñ‡∏ô -->
  <div>
    <div class="signature-box">${signatures.witness1 ? `<img src="${signatures.witness1}" />` : ""}</div>
    <div>‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ .................................... ‡∏û‡∏¢‡∏≤‡∏ô</div>
    <div>(${d.witness1_name})</div>
  </div>
  <div>
    <div class="signature-box">${signatures.witness2 ? `<img src="${signatures.witness2}" />` : ""}</div>
    <div>‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ ..................................... ‡∏û‡∏¢‡∏≤‡∏ô</div>
    <div>(${d.witness2_name})</div>
  </div>
</div>

  `;

  $("contractPreview").innerHTML = contractHTML;
}

// ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF
async function downloadPDF() {
  $("btnPDF").disabled = true;
  $("btnPDF").textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á PDF...";
  const node = $("contractPreview");
  const canvas = await html2canvas(node, { scale: 2, backgroundColor: '#fff' });
  const imgData = canvas.toDataURL("image/png");
  const pdf = new jspdf.jsPDF({ unit: 'mm', format: 'a4' });
  const pdfWidth = 210;
  const pdfHeight = 297;
  const imgProps = pdf.getImageProperties(imgData);
  const imgRatio = imgProps.width / imgProps.height;
  const pageRatio = pdfWidth / pdfHeight;
  const renderWidth = imgRatio > pageRatio ? pdfWidth : pdfHeight * imgRatio;
  const renderHeight = imgRatio > pageRatio ? pdfWidth / imgRatio : pdfHeight;

  pdf.addImage(imgData, 'PNG', (pdfWidth - renderWidth) / 2, (pdfHeight - renderHeight) / 2, renderWidth, renderHeight);
  pdf.save(`‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á_${($("employee_name").value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏")}.pdf`);
  $("btnPDF").disabled = false;
  $("btnPDF").textContent = "‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF";
}

// ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
$("btnReset").addEventListener("click", () => {
  $("contractForm").reset();
  signatures = { employer: null, employee: null, witness1: null, witness2: null };
  renderContract();
});

// Event Listeners
$("btnPreview").addEventListener("click", renderContract);
$("btnPDF").addEventListener("click", async () => { renderContract(); await downloadPDF(); });
$("btnShare").addEventListener("click", () => {
  const required = document.querySelectorAll('[required]');
  const missing = Array.from(required).filter(f => !f.value);
  if (missing.length > 0) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }
  generateShareLink();
});

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å URL ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
window.addEventListener("load", loadFromUrl);
renderContract(); // ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
</script>
</body>
</html>