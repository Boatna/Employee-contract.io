<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4F46E5">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üßπ</text></svg>">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Noto Sans Thai', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Offline indicator */
        .offline-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #fbbf24;
            color: #78350f;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 1000;
            display: none;
        }
        
        /* Animation for notifications */
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        /* Camera modal styles */
        #cameraModal video {
            width: 100%;
            height: auto;
            max-height: 400px;
            background-color: #000;
            border-radius: 8px;
        }
        
        .camera-controls {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        .camera-shutter {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            border: 5px solid #4F46E5;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .camera-shutter:active {
            transform: scale(0.95);
        }
        
        .camera-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator">
        <i class="fas fa-wifi-slash mr-2"></i>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
    </div>
    
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center">
        <div class="w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"></div>
        <p class="text-gray-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏∞‡∏ö‡∏ö...</p>
    </div>
    
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex flex-col items-center justify-center p-4 hidden">
        <div class="w-full max-w-md">
            <div class="text-center mb-10">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full gradient-bg text-white text-4xl mb-4">
                    üßπ
                </div>
                <h1 class="text-3xl font-bold text-gray-800">‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô</h1>
                <p class="text-gray-600 mt-2">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</p>
            </div>
            
            <div class="bg-white rounded-2xl card-shadow p-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-6 text-center">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h2>
                
                <div class="space-y-4" id="employeeList">
                    <!-- Employee list will be loaded here -->
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <div class="text-center text-sm text-gray-500">
                        <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏î‡πâ</p>
                        <p class="mt-1">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="appScreen" class="min-h-screen hidden">
        <!-- Header -->
        <header class="gradient-bg text-white">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <button id="backButton" class="mr-4 text-white hidden">
                            <i class="fas fa-arrow-left text-xl"></i>
                        </button>
                        <div>
                            <h1 class="text-xl font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô</h1>
                            <p class="text-sm opacity-90" id="currentEmployeeName">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <button id="logoutButton" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-full">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Date and Stats -->
                <div class="mt-6 flex justify-between items-center">
                    <div>
                        <p class="text-sm opacity-90">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</p>
                        <p class="text-xl font-bold" id="currentDate">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
                    </div>
                    
                    <div class="text-right">
                        <p class="text-sm opacity-90">‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                        <p class="text-xl font-bold"><span id="completedTasks">0</span>/<span id="totalTasks">0</span></p>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="container mx-auto px-4 py-6">
            <!-- Navigation -->
            <div class="grid grid-cols-2 gap-4 mb-8">
                <a href="#dashboard" class="nav-btn active" data-screen="dashboard">
                    <div class="bg-indigo-100 text-indigo-600 p-3 rounded-xl mb-2">
                        <i class="fas fa-tasks text-2xl"></i>
                    </div>
                    <p class="font-medium">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏á‡∏≤‡∏ô</p>
                </a>
                
                <a href="#submit" class="nav-btn" data-screen="submit">
                    <div class="bg-green-100 text-green-600 p-3 rounded-xl mb-2">
                        <i class="fas fa-camera text-2xl"></i>
                    </div>
                    <p class="font-medium">‡∏™‡πà‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô</p>
                </a>
                
                <a href="#history" class="nav-btn" data-screen="history">
                    <div class="bg-blue-100 text-blue-600 p-3 rounded-xl mb-2">
                        <i class="fas fa-history text-2xl"></i>
                    </div>
                    <p class="font-medium">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô</p>
                </a>
                
                <a href="#profile" class="nav-btn" data-screen="profile">
                    <div class="bg-purple-100 text-purple-600 p-3 rounded-xl mb-2">
                        <i class="fas fa-user text-2xl"></i>
                    </div>
                    <p class="font-medium">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</p>
                </a>
            </div>
            
            <!-- Screens -->
            <div id="screensContainer">
                <!-- Dashboard Screen -->
                <div id="dashboardScreen" class="screen active">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢</h2>
                    
                    <div id="tasksList" class="space-y-4">
                        <!-- Tasks will be loaded here -->
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô...</p>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h3 class="font-medium text-gray-700 mb-3">‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</h3>
                        <div class="bg-white rounded-xl p-4 card-shadow">
                            <div class="flex justify-center mb-4">
                                <div class="w-48 h-48 bg-gray-200 flex items-center justify-center rounded-lg">
                                    <span class="text-gray-500">‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 text-center">‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</p>
                        </div>
                    </div>
                </div>
                
                <!-- Submit Screen (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ) -->
                <div id="submitScreen" class="screen hidden">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏™‡πà‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h2>
                    
                    <form id="submitForm">
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium" for="taskSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á <span class="text-red-500">*</span></label>
                            <select id="taskSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô</option>
                            </select>
                        </div>
                        
                        <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ -->
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô <span class="text-red-500">*</span></label>
                            <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center bg-gray-50">
                                <div class="flex justify-center mb-4">
                                    <div class="w-16 h-16 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center">
                                        <i class="fas fa-camera text-2xl"></i>
                                    </div>
                                </div>
                                <p class="text-gray-700 font-medium mb-1">‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                                <p class="text-sm text-gray-500 mb-4">‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</p>
                                
                                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
                                <button type="button" id="takePhotoBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg w-full">
                                    <i class="fas fa-camera mr-2"></i>‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ
                                </button>
                                
                                <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢ -->
                                <div id="photoPreview" class="mt-6 hidden">
                                    <p class="text-sm text-gray-700 mb-2 font-medium">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢:</p>
                                    <div class="relative">
                                        <img id="previewImage" src="" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏á‡∏≤‡∏ô" class="w-full h-48 object-cover rounded-lg border border-gray-300">
                                        <button type="button" id="removePhotoBtn" class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-2 text-center">‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ" ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà</p>
                                </div>
                                
                                <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ -->
                                <div id="photoWarning" class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg hidden">
                                    <div class="flex items-center">
                                        <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>
                                        <p class="text-sm text-yellow-700">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium" for="notes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                            <textarea id="notes" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô..."></textarea>
                        </div>
                        
                        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6">
                            <div class="flex">
                                <div class="flex-shrink-0 text-yellow-600">
                                    <i class="fas fa-exclamation-circle"></i>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm text-yellow-700">
                                        <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-medium py-4 px-6 rounded-lg w-full text-lg">
                            <i class="fas fa-paper-plane mr-2"></i>‡∏™‡πà‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô
                        </button>
                    </form>
                </div>
                
                <!-- History Screen -->
                <div id="historyScreen" class="screen hidden">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</h2>
                    
                    <div class="mb-6">
                        <div class="flex space-x-2">
                            <button class="filter-btn active" data-filter="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                            <button class="filter-btn" data-filter="today">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
                            <button class="filter-btn" data-filter="week">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</button>
                        </div>
                    </div>
                    
                    <div id="historyList" class="space-y-4">
                        <!-- History will be loaded here -->
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-history text-2xl mb-2"></i>
                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</p>
                        </div>
                    </div>
                </div>
                
                <!-- Profile Screen -->
                <div id="profileScreen" class="screen hidden">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h2>
                    
                    <div class="bg-white rounded-xl card-shadow p-6 mb-6">
                        <div class="flex items-center mb-6">
                            <div class="w-20 h-20 rounded-full gradient-bg text-white flex items-center justify-center text-3xl">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="ml-4">
                                <h3 id="profileName" class="text-xl font-bold text-gray-800">‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h3>
                                <p id="profileId" class="text-gray-600">‡∏£‡∏´‡∏±‡∏™: -</p>
                                <p id="profilePosition" class="text-gray-600">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="bg-indigo-50 rounded-lg p-4 text-center">
                                <p class="text-2xl font-bold text-indigo-700" id="profileTotalJobs">0</p>
                                <p class="text-sm text-gray-600">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            </div>
                            <div class="bg-green-50 rounded-lg p-4 text-center">
                                <p class="text-2xl font-bold text-green-700" id="profileCompletedJobs">0</p>
                                <p class="text-sm text-gray-600">‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</p>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex justify-between py-2 border-b border-gray-100">
                                <span class="text-gray-600">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</span>
                                <span class="font-medium" id="profileStartDate">-</span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-gray-100">
                                <span class="text-gray-600">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</span>
                                <span class="font-medium" id="profileEmail">-</span>
                            </div>
                            <div class="flex justify-between py-2">
                                <span class="text-gray-600">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</span>
                                <span class="font-medium" id="profilePhone">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="bg-white rounded-xl card-shadow p-6">
                            <h3 class="font-bold text-gray-800 mb-4">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô</h3>
                            
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center mr-3">
                                            <i class="fas fa-bell"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
                                            <p class="text-sm text-gray-500">‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="notificationsToggle" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-lg bg-green-100 text-green-600 flex items-center justify-center mr-3">
                                            <i class="fas fa-wifi"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå</p>
                                            <p class="text-sm text-gray-500">‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï</p>
                                        </div>
                                    </div>
                                    <div class="text-sm text-green-600 font-medium">
                                        <i class="fas fa-check-circle"></i> ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center mr-3">
                                            <i class="fas fa-mobile-alt"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ</p>
                                            <p class="text-sm text-gray-500">‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å</p>
                                        </div>
                                    </div>
                                    <button id="installAppBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg text-sm">
                                        ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl card-shadow p-6">
                            <h3 class="font-bold text-gray-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
                            <div class="space-y-3">
                                <a href="#" class="flex items-center justify-between py-2">
                                    <span class="text-gray-700">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                                    <i class="fas fa-chevron-right text-gray-400"></i>
                                </a>
                                <a href="#" class="flex items-center justify-between py-2">
                                    <span class="text-gray-700">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
                                    <i class="fas fa-chevron-right text-gray-400"></i>
                                </a>
                                <a href="#" class="flex items-center justify-between py-2">
                                    <span class="text-gray-700">‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</span>
                                    <i class="fas fa-chevron-right text-gray-400"></i>
                                </a>
                                <a href="#" class="flex items-center justify-between py-2 text-red-600">
                                    <span>‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏õ</span>
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Notification -->
        <div id="notification" class="fixed top-4 right-4 bg-white card-shadow rounded-lg p-4 max-w-sm transform transition-transform duration-300 translate-x-full z-50 hidden">
            <div class="flex items-start">
                <div id="notificationIcon" class="flex-shrink-0 mr-3">
                    <i class="fas fa-check-circle text-green-500 text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 id="notificationTitle" class="font-bold text-gray-800">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h4>
                    <p id="notificationMessage" class="text-gray-600 text-sm mt-1">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
                </div>
                <button id="closeNotificationBtn" class="ml-4 text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Camera Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß -->
    <div id="cameraModal" class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden flex flex-col items-center justify-center p-4">
        <div class="w-full max-w-2xl bg-black rounded-xl overflow-hidden">
            <div class="p-4 bg-black flex justify-between items-center">
                <h3 class="text-lg font-bold text-white">‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h3>
                <button id="closeCameraBtn" class="text-white hover:text-gray-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="relative">
                <!-- Video element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
                <video id="cameraVideo" autoplay playsinline class="w-full h-auto max-h-[70vh] bg-black"></video>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡∏´‡∏ô‡πâ‡∏≤/‡∏´‡∏•‡∏±‡∏á) -->
                <button id="switchCameraBtn" class="camera-switch">
                    <i class="fas fa-sync-alt"></i>
                </button>
                
                <!-- Controls ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
                <div class="camera-controls">
                    <button id="captureBtn" class="camera-shutter">
                        <div class="w-12 h-12 rounded-full bg-white"></div>
                    </button>
                </div>
            </div>
            
            <div class="p-4 bg-black text-center">
                <p class="text-white text-sm">‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</p>
                <p class="text-gray-400 text-xs mt-1">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û</p>
            </div>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl w-full max-w-md p-8 text-center">
            <div class="w-20 h-20 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-4xl mx-auto mb-6">
                <i class="fas fa-check"></i>
            </div>
            
            <h3 class="text-2xl font-bold text-gray-800 mb-2">‡∏™‡πà‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
            <p class="text-gray-600 mb-6">‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
            
            <div class="flex space-x-4">
                <button id="viewDetailsBtn" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-lg">
                    ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                </button>
                <button id="closeSuccessBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-4 rounded-lg">
                    ‡∏õ‡∏¥‡∏î
                </button>
            </div>
        </div>
    </div>
    
    <!-- Google Apps Script Configuration -->
    <script id="appConfig">
        const CONFIG = {
            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏Ç‡∏≠‡∏á Google Apps Script Web App ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            GOOGLE_SCRIPT_URL: "https://script.google.com/macros/s/AKfycbyvNz0PfJbL4aX8WZ8_NHx6JgYjL_7aNkY5Zx5X6U6Y/exec",
            VERSION: "1.0.0",
            CACHE_NAME: "housekeeping-system-v1"
        };
    </script>
    
    <!-- Main JavaScript ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß -->
    <script>
        // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô localStorage
        const storage = {
            set: (key, value) => {
                localStorage.setItem(`hk_${key}`, JSON.stringify(value));
            },
            get: (key, defaultValue = null) => {
                const value = localStorage.getItem(`hk_${key}`);
                return value ? JSON.parse(value) : defaultValue;
            },
            remove: (key) => {
                localStorage.removeItem(`hk_${key}`);
            },
            clear: () => {
                // ‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ key ‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ hk_
                Object.keys(localStorage).forEach(key => {
                    if (key.startsWith('hk_')) {
                        localStorage.removeItem(key);
                    }
                });
            }
        };

        // ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
        const networkManager = {
            isOnline: () => navigator.onLine,
            queue: storage.get('sync_queue', []),
            
            init: () => {
                window.addEventListener('online', () => {
                    document.getElementById('offlineIndicator').style.display = 'none';
                    networkManager.processQueue();
                    showNotification('‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏•‡πâ‡∏ß', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...', 'info');
                });
                
                window.addEventListener('offline', () => {
                    document.getElementById('offlineIndicator').style.display = 'block';
                    showNotification('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß', 'warning');
                });
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                if (!networkManager.isOnline()) {
                    document.getElementById('offlineIndicator').style.display = 'block';
                }
            },
            
            addToQueue: (data) => {
                networkManager.queue.push({
                    ...data,
                    timestamp: new Date().toISOString(),
                    id: Date.now()
                });
                storage.set('sync_queue', networkManager.queue);
            },
            
            processQueue: async () => {
                if (networkManager.queue.length === 0 || !networkManager.isOnline()) return;
                
                showNotification('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...', 'info');
                
                // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                for (let i = 0; i < networkManager.queue.length; i++) {
                    const item = networkManager.queue[i];
                    try {
                        // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Google Apps Script
                        await fetch(CONFIG.GOOGLE_SCRIPT_URL, {
                            method: 'POST',
                            body: JSON.stringify(item.data),
                            headers: {
                                'Content-Type': 'application/json'
                            }
                        });
                        
                        // ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                        networkManager.queue.splice(i, 1);
                        i--;
                    } catch (error) {
                        console.error('Error syncing data:', error);
                    }
                }
                
                storage.set('sync_queue', networkManager.queue);
                
                if (networkManager.queue.length === 0) {
                    showNotification('‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß', 'success');
                }
            }
        };

        // ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡πâ‡∏≠‡∏á
        const cameraManager = {
            currentStream: null,
            facingMode: 'environment', // 'environment' = ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á, 'user' = ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
            startCamera: async (facingMode = 'environment') => {
                try {
                    // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
                    if (cameraManager.currentStream) {
                        cameraManager.stopCamera();
                    }
                    
                    const constraints = {
                        video: {
                            facingMode: facingMode,
                            width: { ideal: 1280 },
                            height: { ideal: 720 }
                        },
                        audio: false
                    };
                    
                    const stream = await navigator.mediaDevices.getUserMedia(constraints);
                    const videoElement = document.getElementById('cameraVideo');
                    
                    videoElement.srcObject = stream;
                    cameraManager.currentStream = stream;
                    cameraManager.facingMode = facingMode;
                    
                    return true;
                } catch (error) {
                    console.error('Error accessing camera:', error);
                    showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á', 'error');
                    return false;
                }
            },
            
            // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
            stopCamera: () => {
                if (cameraManager.currentStream) {
                    cameraManager.currentStream.getTracks().forEach(track => {
                        track.stop();
                    });
                    cameraManager.currentStream = null;
                }
            },
            
            // ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            capturePhoto: () => {
                const videoElement = document.getElementById('cameraVideo');
                const canvas = document.createElement('canvas');
                
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î canvas ‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
                canvas.width = videoElement.videoWidth;
                canvas.height = videoElement.videoHeight;
                
                // ‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏•‡∏á canvas
                const context = canvas.getContext('2d');
                context.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
                
                // ‡πÅ‡∏õ‡∏•‡∏á canvas ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (JPEG 80% quality)
                const imageDataUrl = canvas.toDataURL('image/jpeg', 0.8);
                
                return imageDataUrl;
            },
            
            // ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡∏´‡∏ô‡πâ‡∏≤/‡∏´‡∏•‡∏±‡∏á)
            switchCamera: () => {
                const newFacingMode = cameraManager.facingMode === 'environment' ? 'user' : 'environment';
                cameraManager.startCamera(newFacingMode);
            }
        };

        // ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ UI
        const uiManager = {
            currentScreen: 'dashboard',
            currentEmployee: null,
            
            init: () => {
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                const now = new Date();
                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                };
                document.getElementById('currentDate').textContent = 
                    now.toLocaleDateString('th-TH', options);
                
                // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
                uiManager.loadEmployees();
                
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ event listeners
                uiManager.setupEventListeners();
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                const savedEmployee = storage.get('current_employee');
                if (savedEmployee) {
                    uiManager.login(savedEmployee);
                } else {
                    uiManager.showLoginScreen();
                }
                
                // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô
                uiManager.loadTasks();
            },
            
            showLoginScreen: () => {
                document.getElementById('loadingScreen').classList.add('hidden');
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('appScreen').classList.add('hidden');
            },
            
            showAppScreen: () => {
                document.getElementById('loadingScreen').classList.add('hidden');
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('appScreen').classList.remove('hidden');
            },
            
            loadEmployees: () => {
                // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
                const employees = [
                    { id: 1, name: '‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡πÉ‡∏à‡∏î‡∏µ', position: '‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô', phone: '081-234-5678', email: 'somying@example.com', startDate: '2023-01-15' },
                    { id: 2, name: '‡∏•‡∏≥‡∏î‡∏ß‡∏ô ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°', position: '‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô', phone: '082-345-6789', email: 'lamduan@example.com', startDate: '2023-02-20' },
                    { id: 3, name: '‡∏ö‡∏∏‡∏ç‡∏°‡∏µ ‡∏£‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô', position: '‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô', phone: '083-456-7890', email: 'boonmee@example.com', startDate: '2022-11-10' },
                    { id: 4, name: '‡∏£‡∏ß‡∏á‡∏Ç‡πâ‡∏≤‡∏ß ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢', position: '‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô', phone: '084-567-8901', email: 'ruangkhao@example.com', startDate: '2023-03-05' },
                    { id: 5, name: '‡πÄ‡∏û‡∏ä‡∏£‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏ß‡∏¥‡πÑ‡∏•', position: '‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô', phone: '085-678-9012', email: 'petch@example.com', startDate: '2023-04-12' }
                ];
                
                storage.set('employees', employees);
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
                const employeeList = document.getElementById('employeeList');
                employeeList.innerHTML = '';
                
                employees.forEach(employee => {
                    const button = document.createElement('button');
                    button.className = 'w-full bg-white border border-gray-200 hover:bg-gray-50 text-gray-800 font-medium py-4 px-4 rounded-xl text-left transition-colors duration-200';
                    button.innerHTML = `
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center mr-3">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <p class="font-medium">${employee.name}</p>
                                <p class="text-sm text-gray-500">${employee.position}</p>
                            </div>
                        </div>
                    `;
                    button.addEventListener('click', () => uiManager.login(employee));
                    employeeList.appendChild(button);
                });
            },
            
            login: (employee) => {
                uiManager.currentEmployee = employee;
                storage.set('current_employee', employee);
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô UI
                document.getElementById('currentEmployeeName').textContent = employee.name;
                document.getElementById('profileName').textContent = employee.name;
                document.getElementById('profileId').textContent = `‡∏£‡∏´‡∏±‡∏™: HK${employee.id.toString().padStart(3, '0')}`;
                document.getElementById('profilePosition').textContent = `‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${employee.position}`;
                document.getElementById('profileEmail').textContent = employee.email;
                document.getElementById('profilePhone').textContent = employee.phone;
                document.getElementById('profileStartDate').textContent = new Date(employee.startDate).toLocaleDateString('th-TH');
                
                // ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                uiManager.loadEmployeeStats();
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                uiManager.showAppScreen();
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                showNotification(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${employee.name}`, '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß', 'success');
            },
            
            logout: () => {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                    storage.remove('current_employee');
                    uiManager.currentEmployee = null;
                    uiManager.showLoginScreen();
                }
            },
            
            switchScreen: (screenId) => {
                // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.add('hidden');
                    screen.classList.remove('active');
                });
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                const targetScreen = document.getElementById(`${screenId}Screen`);
                if (targetScreen) {
                    targetScreen.classList.remove('hidden');
                    targetScreen.classList.add('active');
                }
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-screen') === screenId) {
                        btn.classList.add('active');
                    }
                });
                
                uiManager.currentScreen = screenId;
                
                // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                if (screenId === 'dashboard') {
                    uiManager.loadTasks();
                } else if (screenId === 'submit') {
                    uiManager.loadTaskOptions();
                } else if (screenId === 'history') {
                    uiManager.loadHistory();
                } else if (screenId === 'profile') {
                    uiManager.loadEmployeeStats();
                }
            },
            
            loadTasks: () => {
                // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô
                const tasks = [
                    { id: 1, name: '‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å 201', area: '‡∏ï‡∏∂‡∏Å A ‡∏ä‡∏±‡πâ‡∏ô 2', priority: '‡∏™‡∏π‡∏á', estimatedTime: '30 ‡∏ô‡∏≤‡∏ó‡∏µ', status: 'pending' },
                    { id: 2, name: '‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏•‡πá‡∏≠‡∏ö‡∏ö‡∏µ‡πâ', area: '‡∏ï‡∏∂‡∏Å‡∏´‡∏•‡∏±‡∏Å ‡∏ä‡∏±‡πâ‡∏ô 1', priority: '‡∏õ‡∏Å‡∏ï‡∏¥', estimatedTime: '45 ‡∏ô‡∏≤‡∏ó‡∏µ', status: 'pending' },
                    { id: 3, name: '‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞', area: '‡∏ï‡∏∂‡∏Å B ‡∏ä‡∏±‡πâ‡∏ô 1', priority: '‡∏õ‡∏Å‡∏ï‡∏¥', estimatedTime: '25 ‡∏ô‡∏≤‡∏ó‡∏µ', status: 'completed' },
                    { id: 4, name: '‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á', area: '‡∏ï‡∏∂‡∏Å C ‡∏ä‡∏±‡πâ‡∏ô 3', priority: '‡∏ï‡πà‡∏≥', estimatedTime: '60 ‡∏ô‡∏≤‡∏ó‡∏µ', status: 'pending' },
                    { id: 5, name: '‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ñ‡∏£‡∏±‡∏ß‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á', area: '‡∏ï‡∏∂‡∏Å‡∏û‡∏±‡∏Å‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô', priority: '‡∏™‡∏π‡∏á', estimatedTime: '40 ‡∏ô‡∏≤‡∏ó‡∏µ', status: 'pending' }
                ];
                
                storage.set('tasks', tasks);
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó UI
                const tasksList = document.getElementById('tasksList');
                const completedTasks = tasks.filter(task => task.status === 'completed').length;
                
                document.getElementById('completedTasks').textContent = completedTasks;
                document.getElementById('totalTasks').textContent = tasks.length;
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô
                tasksList.innerHTML = '';
                
                tasks.forEach(task => {
                    const priorityColors = {
                        '‡∏™‡∏π‡∏á': 'bg-red-100 text-red-800',
                        '‡∏õ‡∏Å‡∏ï‡∏¥': 'bg-blue-100 text-blue-800',
                        '‡∏ï‡πà‡∏≥': 'bg-gray-100 text-gray-800'
                    };
                    
                    const statusColors = {
                        'pending': 'bg-yellow-100 text-yellow-800',
                        'in_progress': 'bg-blue-100 text-blue-800',
                        'completed': 'bg-green-100 text-green-800'
                    };
                    
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-xl card-shadow p-5';
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-gray-800 text-lg">${task.name}</h3>
                                <p class="text-gray-600 text-sm mt-1">
                                    <i class="fas fa-map-marker-alt mr-1"></i>${task.area}
                                </p>
                            </div>
                            <span class="px-3 py-1 rounded-full text-xs font-medium ${priorityColors[task.priority]}">
                                ${task.priority}
                            </span>
                        </div>
                        
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-clock mr-2"></i>
                                <span class="text-sm">${task.estimatedTime}</span>
                            </div>
                            <span class="px-3 py-1 rounded-full text-xs font-medium ${statusColors[task.status]}">
                                ${task.status === 'completed' ? '‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß' : 
                                  task.status === 'in_progress' ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥' : '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'}
                            </span>
                        </div>
                        
                        <div class="flex space-x-3">
                            ${task.status !== 'completed' ? `
                                <button class="task-action-btn flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg" data-task-id="${task.id}" data-action="start">
                                    <i class="fas fa-play mr-2"></i>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô
                                </button>
                            ` : ''}
                            
                            <button class="task-action-btn flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg" data-task-id="${task.id}" data-action="details">
                                <i class="fas fa-info-circle mr-2"></i>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                            </button>
                        </div>
                    `;
                    
                    tasksList.appendChild(card);
                });
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listeners ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô
                document.querySelectorAll('.task-action-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const taskId = this.getAttribute('data-task-id');
                        const action = this.getAttribute('data-action');
                        uiManager.handleTaskAction(taskId, action);
                    });
                });
            },
            
            loadTaskOptions: () => {
                const tasks = storage.get('tasks', []);
                const taskSelect = document.getElementById('taskSelect');
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï options
                taskSelect.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô</option>';
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à
                tasks.filter(task => task.status !== 'completed').forEach(task => {
                    const option = document.createElement('option');
                    option.value = task.id;
                    option.textContent = `${task.name} (${task.area})`;
                    taskSelect.appendChild(option);
                });
            },
            
            loadHistory: () => {
                const history = storage.get('submission_history', []);
                const historyList = document.getElementById('historyList');
                
                if (history.length === 0) {
                    historyList.innerHTML = `
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-history text-2xl mb-2"></i>
                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</p>
                        </div>
                    `;
                    return;
                }
                
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤
                history.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                
                historyList.innerHTML = '';
                
                history.forEach(item => {
                    const date = new Date(item.timestamp);
                    const formattedDate = date.toLocaleDateString('th-TH', {
                        day: 'numeric',
                        month: 'short',
                        year: 'numeric'
                    });
                    const formattedTime = date.toLocaleTimeString('th-TH', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-xl card-shadow p-5';
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-gray-800">${item.taskName}</h3>
                                <p class="text-gray-600 text-sm mt-1">
                                    <i class="fas fa-map-marker-alt mr-1"></i>${item.area}
                                </p>
                            </div>
                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                ‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß
                            </span>
                        </div>
                        
                        <div class="mb-4">
                            <p class="text-gray-700 text-sm">
                                <i class="fas fa-comment mr-2"></i>
                                ${item.notes || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏'}
                            </p>
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <div>
                                <i class="far fa-clock mr-1"></i>
                                ${formattedDate} ${formattedTime}
                            </div>
                            <div class="flex space-x-2">
                                ${item.hasImage ? `
                                    <button class="view-image-btn text-indigo-600 hover:text-indigo-800" data-id="${item.id}">
                                        <i class="fas fa-image mr-1"></i>‡∏î‡∏π‡∏£‡∏π‡∏õ
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    `;
                    
                    historyList.appendChild(card);
                });
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏£‡∏π‡∏õ
                document.querySelectorAll('.view-image-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.getAttribute('data-id');
                        uiManager.viewImage(id);
                    });
                });
            },
            
            loadEmployeeStats: () => {
                const history = storage.get('submission_history', []);
                const employee = uiManager.currentEmployee;
                
                if (!employee) return;
                
                // ‡∏ô‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ
                const employeeHistory = history.filter(item => item.employeeId === employee.id);
                const completedCount = employeeHistory.length;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                document.getElementById('profileTotalJobs').textContent = completedCount + 5; // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
                document.getElementById('profileCompletedJobs').textContent = completedCount;
            },
            
            handleTaskAction: (taskId, action) => {
                const tasks = storage.get('tasks', []);
                const task = tasks.find(t => t.id == taskId);
                
                if (!task) return;
                
                if (action === 'start') {
                    // ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Submit ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ
                    uiManager.switchScreen('submit');
                    
                    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏ô dropdown
                    setTimeout(() => {
                        document.getElementById('taskSelect').value = taskId;
                    }, 100);
                    
                    showNotification('‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô', `‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô: ${task.name}`, 'info');
                } else if (action === 'details') {
                    alert(`‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô:\n\n‡∏á‡∏≤‡∏ô: ${task.name}\n‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: ${task.area}\n‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ${task.priority}\n‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì: ${task.estimatedTime}\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${task.status === 'completed' ? '‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß' : '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'}`);
                }
            },
            
            // ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ
            openCamera: async () => {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    showNotification('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö', '‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á', 'error');
                    return false;
                }
                
                // ‡πÅ‡∏™‡∏î‡∏á modal ‡∏Å‡∏•‡πâ‡∏≠‡∏á
                document.getElementById('cameraModal').classList.remove('hidden');
                
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
                const cameraStarted = await cameraManager.startCamera('environment');
                
                return cameraStarted;
            },
            
            submitWork: (formData) => {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                if (!formData.image) {
                    document.getElementById('photoWarning').classList.remove('hidden');
                    showNotification('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô', 'error');
                    return;
                }
                
                const tasks = storage.get('tasks', []);
                const task = tasks.find(t => t.id == formData.taskId);
                
                if (!task) {
                    showNotification('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô', 'error');
                    return;
                }
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô
                const submission = {
                    id: Date.now(),
                    employeeId: uiManager.currentEmployee.id,
                    employeeName: uiManager.currentEmployee.name,
                    taskId: formData.taskId,
                    taskName: task.name,
                    area: task.area,
                    notes: formData.notes,
                    hasImage: !!formData.image,
                    imageData: formData.image,
                    timestamp: new Date().toISOString()
                };
                
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage
                const history = storage.get('submission_history', []);
                history.push(submission);
                storage.set('submission_history', history);
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô
                task.status = 'completed';
                storage.set('tasks', tasks);
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏Ñ‡∏¥‡∏ß‡∏Å‡∏≤‡∏£‡∏ã‡∏¥‡∏á‡∏Ñ‡πå
                networkManager.addToQueue({
                    type: 'submission',
                    data: submission
                });
                
                // ‡πÅ‡∏™‡∏î‡∏á modal ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                document.getElementById('successModal').classList.remove('hidden');
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
                document.getElementById('submitForm').reset();
                document.getElementById('photoPreview').classList.add('hidden');
                document.getElementById('photoWarning').classList.add('hidden');
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                uiManager.loadTasks();
                uiManager.loadEmployeeStats();
            },
            
            setupEventListeners: () => {
                // ‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        const screen = this.getAttribute('data-screen');
                        uiManager.switchScreen(screen);
                    });
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                document.getElementById('logoutButton').addEventListener('click', () => uiManager.logout());
                
                // ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡πà‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                document.getElementById('submitForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        taskId: document.getElementById('taskSelect').value,
                        notes: document.getElementById('notes').value,
                        image: document.getElementById('previewImage').src || ''
                    };
                    
                    if (!formData.taskId) {
                        showNotification('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô', 'error');
                        return;
                    }
                    
                    uiManager.submitWork(formData);
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß)
                document.getElementById('takePhotoBtn').addEventListener('click', async () => {
                    const cameraOpened = await uiManager.openCamera();
                    
                    if (!cameraOpened) {
                        document.getElementById('cameraModal').classList.add('hidden');
                    }
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏£‡∏π‡∏õ
                document.getElementById('removePhotoBtn').addEventListener('click', () => {
                    document.getElementById('previewImage').src = '';
                    document.getElementById('photoPreview').classList.add('hidden');
                    document.getElementById('photoWarning').classList.remove('hidden');
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ
                document.getElementById('installAppBtn').addEventListener('click', () => {
                    if (window.deferredPrompt) {
                        window.deferredPrompt.prompt();
                        window.deferredPrompt.userChoice.then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                showNotification('‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡πÅ‡∏≠‡∏õ‡∏ñ‡∏π‡∏Å‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß', 'success');
                            }
                            window.deferredPrompt = null;
                        });
                    } else {
                        showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå', 'info');
                    }
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                document.getElementById('closeNotificationBtn').addEventListener('click', () => {
                    document.getElementById('notification').classList.add('hidden');
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
                document.getElementById('closeCameraBtn').addEventListener('click', () => {
                    cameraManager.stopCamera();
                    document.getElementById('cameraModal').classList.add('hidden');
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á
                document.getElementById('switchCameraBtn').addEventListener('click', () => {
                    cameraManager.switchCamera();
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÉ‡∏ô modal ‡∏Å‡∏•‡πâ‡∏≠‡∏á
                document.getElementById('captureBtn').addEventListener('click', () => {
                    // ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ
                    const photoDataUrl = cameraManager.capturePhoto();
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πà‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô
                    document.getElementById('previewImage').src = photoDataUrl;
                    document.getElementById('photoPreview').classList.remove('hidden');
                    document.getElementById('photoWarning').classList.add('hidden');
                    
                    // ‡∏õ‡∏¥‡∏î modal ‡∏Å‡∏•‡πâ‡∏≠‡∏á
                    cameraManager.stopCamera();
                    document.getElementById('cameraModal').classList.add('hidden');
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                    showNotification('‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î modal ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                document.getElementById('closeSuccessBtn').addEventListener('click', () => {
                    document.getElementById('successModal').classList.add('hidden');
                });
                
                document.getElementById('viewDetailsBtn').addEventListener('click', () => {
                    document.getElementById('successModal').classList.add('hidden');
                    uiManager.switchScreen('history');
                });
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        // ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        uiManager.loadHistory();
                    });
                });
                
                // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏ô preview ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
                document.getElementById('previewImage').addEventListener('click', async () => {
                    const cameraOpened = await uiManager.openCamera();
                    
                    if (!cameraOpened) {
                        document.getElementById('cameraModal').classList.add('hidden');
                    }
                });
            }
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showNotification(title, message, type = 'info') {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notificationIcon');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
            let iconClass = 'fas fa-info-circle';
            let iconColor = 'text-blue-500';
            
            switch (type) {
                case 'success':
                    iconClass = 'fas fa-check-circle';
                    iconColor = 'text-green-500';
                    break;
                case 'error':
                    iconClass = 'fas fa-exclamation-circle';
                    iconColor = 'text-red-500';
                    break;
                case 'warning':
                    iconClass = 'fas fa-exclamation-triangle';
                    iconColor = 'text-yellow-500';
                    break;
            }
            
            icon.innerHTML = `<i class="${iconClass} ${iconColor} text-xl"></i>`;
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            notification.classList.remove('hidden');
            notification.classList.remove('translate-x-full');
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    notification.classList.add('hidden');
                }, 300);
            }, 5000);
        }

        // PWA Setup
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô Service Worker
                navigator.serviceWorker.register('/service-worker.js').then(registration => {
                    console.log('ServiceWorker registered:', registration);
                }).catch(error => {
                    console.log('ServiceWorker registration failed:', error);
                });
            });
        }

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PWA
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            window.deferredPrompt = e;
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        document.addEventListener('DOMContentLoaded', () => {
            // ‡∏ã‡πà‡∏≠‡∏ô loading screen ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
            setTimeout(() => {
                networkManager.init();
                uiManager.init();
            }, 1000);
        });
    </script>
    
    <!-- Service Worker (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PWA) -->
    <script>
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á Service Worker ‡πÅ‡∏ö‡∏ö inline
        if ('serviceWorker' in navigator) {
            const swContent = `
                const CACHE_NAME = '${CONFIG.CACHE_NAME}';
                const urlsToCache = [
                    '/',
                    '/index.html',
                    '/manifest.json'
                ];

                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(cache => cache.addAll(urlsToCache))
                    );
                });

                self.addEventListener('fetch', event => {
                    event.respondWith(
                        caches.match(event.request)
                            .then(response => {
                                if (response) {
                                    return response;
                                }
                                return fetch(event.request);
                            })
                    );
                });

                self.addEventListener('activate', event => {
                    const cacheWhitelist = [CACHE_NAME];
                    event.waitUntil(
                        caches.keys().then(cacheNames => {
                            return Promise.all(
                                cacheNames.map(cacheName => {
                                    if (cacheWhitelist.indexOf(cacheName) === -1) {
                                        return caches.delete(cacheName);
                                    }
                                })
                            );
                        })
                    );
                });
            `;

            // ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô Service Worker
            navigator.serviceWorker.register(
                URL.createObjectURL(new Blob([swContent], { type: 'application/javascript' }))
            );
        }
    </script>
</body>
</html>